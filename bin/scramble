#!/usr/bin/env node

const yargs = require('yargs')
  .usage('Usage: scramble <type> [number]')

const readline = require('readline');

readline.emitKeypressEvents(process.stdin);
process.stdin.setRawMode(true);

const Scramblers = require('../').Scramblers;
const args = yargs.argv;

if (!args._[0]) {
  return yargs.showHelp();
}

const scrambler = Scramblers.get(args._[0]);
if (scrambler) {
  scrambler.init();
  console.log(scrambler.scramble(args._.slice(1)));

  process.stdin.on('keypress', function (str, key) {
    if (str === '\u0003') {
      process.exit();
    }
    process.stdout.write(scrambler.scramble(args._.slice(1)) + '\n');
  });
}

